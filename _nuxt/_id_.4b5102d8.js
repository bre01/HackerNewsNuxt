import{t as a,_ as I}from"./timestamp.7d9daba8.js";import{_ as p,o as s,c as o,a as e,t as l,n as x,v as S,F as h,p as g,e as $,q as b,b as m,s as M,u as C,r as f,x as R,y as c}from"./entry.3fdb70b2.js";import"./nuxt-link.294b6717.js";const j={props:["time"],data(){return{abs_time:null,relative_time:null}},mounted(){const t=/ GMT\+0800 \(China Standard Time\)$/;this.abs_time=a.toDate(this.time).toString().replace(t,"")},computed:{relative_time(){var t={hour:Math.round((parseInt(a.now())-parseInt(this.time))/3600),min:(parseInt(a.now())-parseInt(this.time))%60};return`${t.hour} hours ago`}}};function L(t,_,i,d,n,r){return s(),o("div",null,[e("span",null,l(n.abs_time),1),x(e("span",null,"          "+l(r.relative_time),513),[[S,!0]])])}const D=p(j,[["render",L]]);const H={props:["id"],data(){return{reply:null,author:null,time:null}},mounted(){fetch(`https://hacker-news.firebaseio.com/v0/item/${this.id}.json?print=pretty`).then(t=>t.json()).then(t=>{this.reply=t.text,this.author=t.by,this.time=t.time}).catch(t=>console.log(t))},computed:{postTime(){const t=/ GMT\+0800 \(China Standard Time\)$/;return a.toDate(this.time).toString().replace(t,"")}}},w=t=>(g("data-v-fa77065d"),t=t(),$(),t),N={key:0},B=["innerHTML"],G={id:"author"},V={key:1},F=w(()=>e("div",null,"loading",-1)),q=[F],E=w(()=>e("br",null,null,-1));function U(t,_,i,d,n,r){return s(),o(h,null,[n.reply?(s(),o("div",N,[e("div",{class:"replay",innerHTML:n.reply},null,8,B),e("div",G," by "+l(n.author)+"         "+l(r.postTime),1)])):(s(),o("div",V,q)),E],64)}const z=p(H,[["render",U],["__scopeId","data-v-fa77065d"]]);const A={props:["id"],data(){return{comment:null,kids:[],showReply:!0,time:null,user:null}},methods:{toggle(){this.showReply=!this.showReply,console.log(this.showReply)}},computed:{showTime(){return{hour:(parseInt(a.now())-parseInt(this.time))/3600,min:(parseInt(a.now())-parseInt(this.time))%60}},postTime(){const t=/ GMT\+0800 \(China Standard Time\)$/;return a.toDate(this.time).toString().replace(t,"")}},mounted(){fetch(`https://hacker-news.firebaseio.com/v0/item/${this.id}.json?print=pretty`).then(t=>t.json()).then(t=>{this.kids=t.kids||[],this.comment=t.text,this.time=t.time,this.user=t.by}).catch(t=>console.log(t))}},v=t=>(g("data-v-d16836bd"),t=t(),$(),t),J=v(()=>e("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1)),K=v(()=>e("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1)),O={class:"comment"},P={id:"comment-root"},Q=["innerHTML"],W=["hidden"],X=v(()=>e("br",null,null,-1)),Y=v(()=>e("br",null,null,-1)),Z={key:0,class:"grid-container"},tt={class:"no-number"};function et(t,_,i,d,n,r){const y=z;return s(),o(h,null,[J,K,e("div",O,[e("div",P,[e("div",{class:"comment-html",innerHTML:n.comment},null,8,Q),e("div",null,l(Math.round(r.showTime.hour))+" hours "+l(r.showTime.min.toString().slice(0,2))+" mins ago ",1),e("button",{onClick:_[0]||(_[0]=(...u)=>r.toggle&&r.toggle(...u)),hidden:!n.kids.length},"show "+l(n.kids.length)+" replies",9,W),X,Y,n.showReply?(s(),o("ol",Z,[(s(!0),o(h,null,b(n.kids,u=>(s(),o("li",tt,[m(y,{id:u},null,8,["id"])]))),256))])):M("",!0)])])],64)}const nt=p(A,[["render",et],["__scopeId","data-v-d16836bd"]]);const k=t=>(g("data-v-bd2b21ee"),t=t(),$(),t),st={key:0,id:"Comments-root"},ot=["href"],it={id:"time ",class:"container"},rt=["href"],lt=k(()=>e("br",null,null,-1)),_t={key:1},ct=k(()=>e("h1",null,"loading...",-1)),at=[ct],dt={__name:"[id]",setup(t){const _=C();console.log(_.params.id);const i=f(null),d=f(null);return f(null),R(()=>{fetch(`https://hacker-news.firebaseio.com/v0/item/${_.params.id}.json?print=pretty`).then(n=>n.json()).then(n=>(i.value=n,null)).then(n=>{var r=new URL(i.value.url);d.value=r.hostname,console.log("succ")})}),(n,r)=>{const y=I,u=D;return s(),o(h,null,[m(y),c(i)?(s(),o("div",st,[e("a",{class:"title",href:c(i).url},[e("h3",null,l(c(i).title),1)],8,ot),e("div",it,[e("a",{href:c(i).url,class:"domain"},"www."+l(c(d)),9,rt)]),m(u,{id:"source-time",time:c(i).time},null,8,["time"]),(s(!0),o(h,null,b(c(i).kids,T=>(s(),o("ul",null,[e("li",null,[m(nt,{id:T},null,8,["id"]),lt])]))),256))])):(s(),o("div",_t,at))],64)}}},pt=p(dt,[["__scopeId","data-v-bd2b21ee"]]);export{pt as default};
