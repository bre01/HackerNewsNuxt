import{t as p,_ as S}from"./timestamp.bd14e2ad.js";import{_ as A,o,c as r,a as n,t as _,n as $,v as k,q as v,s as I,u as c,b as d,x,w as M,r as f,y as b,F as g,z as w,A as T,B as j}from"./entry.d700656e.js";import{_ as B}from"./nuxt-link.62b40f5c.js";const L={props:["time"],data(){return{abs_time:null,relative_time:null}},mounted(){const s=/ GMT\+0800 \(China Standard Time\)$/;this.abs_time=p.toDate(this.time).toString().replace(s,"")},computed:{relative_time(){var s={hour:Math.round((parseInt(p.now())-parseInt(this.time))/3600),min:(parseInt(p.now())-parseInt(this.time))%60};return`${s.hour} hours ago`}}};function N(s,i,e,t,a,m){return o(),r("div",null,[n("span",null,_(a.abs_time),1),$(n("span",null,"          "+_(m.relative_time),513),[[k,!0]])])}const E=A(L,[["render",N]]),D={style:{position:"relative"}},q={tabindex:"0",class:"collapse collapse-arrow border border-base-300 bg-base-200",style:{width:"50%",margin:"auto","text-align":"center"}},z={class:"collapse-title text-xl font-medium"},H=["href"],R={class:"collapse-content"},F={id:"time ",class:"container"},G=["href"],O=v({__name:"ArticleInfoV1",props:{story:{type:Object,required:!0}},setup(s){const i=s;fetch(i.story.url).then(t=>t.text()).then(t=>{const a=document.createElement("div");a.innerHTML=t;const m=a.querySelectorAll("img");let l=null,h=0;if(m.forEach(u=>{const y=u.width*u.height;y>h&&(h=y,l=u.src)}),l){const u=document.getElementById("image-container");u.style.backgroundImage=`url(${i.story.url}${l})`}}).catch(t=>console.error("Error fetching news:",t)),console.log(i.story);const e=I(()=>new URL(i.story.url).hostname);return(t,a)=>{const m=E;return o(),r("div",D,[n("div",q,[n("div",z,[n("a",{class:"title",href:s.story.url},[n("h1",null,_(s.story.title),1)],8,H)]),n("div",R,[n("div",F,[n("a",{href:s.story.url,class:"domain"},"www."+_(c(e)),9,G)]),d(m,{id:"source-time",time:s.story.time},null,8,["time"])])])])}}}),U={class:"comment-author"},J=v({__name:"Author",props:{author:String},setup(s){return(i,e)=>{const t=B;return o(),x(t,{to:`user/${s.author}`},{default:M(()=>[n("div",U,_(s.author),1)]),_:1},8,["to"])}}}),K=n("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),P=n("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1),Q=["id"],W=["href"],X={class:"sr-only"},Y={class:"comment-heading"},Z={class:"comment-info"},tt={class:"m-0",style:{}},et={class:"comment-body"},nt=["innerHTML"],st={key:0},ot={class:"replies"},ct={key:1},rt=n("span",{class:"loading loading-spinner loading-sm"},null,-1),it=[rt],C=v({__name:"CommentV1",props:{commentId:Number},setup(s){const i=s,e=f();fetch(`https://hacker-news.firebaseio.com/v0/item/${i.commentId}.json?print=pretty`).then(l=>l.json()).then(l=>{e.value=l,console.log(e.value)}).catch(l=>console.log(l)).finally(()=>console.log("finally"));const t=f(!1);function a(){t.value=!t.value,console.log(t.value)}const m=I(()=>({hour:(parseInt(p.now())-parseInt(e.value?e.value.time:0))/3600,min:(parseInt(p.now())-parseInt(e.value?e.value.time:0))%60}));return(l,h)=>{const u=J,y=C;return o(),r(g,null,[K,P,c(e)?(o(),r("div",{key:0,class:"comment",id:s.commentId},[n("a",{href:`#${s.commentId}`,class:"comment-border-link"},[n("span",X,"jump to comment "+_(s.commentId),1)],8,W),n("div",Y,[n("div",Z,[d(u,{author:c(e).by,class:"comment-author"},null,8,["author"]),n("div",tt,_(Math.round(c(m).hour))+" hours "+_(c(m).min.toString().slice(0,2))+" mins ago ",1)])]),n("div",et,[n("div",{innerHTML:c(e).text},null,8,nt),c(e).kids?(o(),r("div",st,[c(t)?(o(),r("button",{key:1,onClick:a,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," hide replies ")):(o(),r("button",{key:0,onClick:a,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," show "+_(c(e).kids.length)+" replies ",1))])):b("",!0)]),c(e).kids?(o(!0),r(g,{key:0},w(c(e).kids,V=>$((o(),r("div",ot,[d(y,{commentId:V},null,8,["commentId"])],512)),[[k,c(t)]])),256)):b("",!0)],8,Q)):(o(),r("div",ct,it))],64)}}});const lt={class:"comment-thread"},at=v({__name:"CommentsV1",props:{commentIds:Array},setup(s){return(i,e)=>{const t=C;return o(),r("div",lt,[(o(!0),r(g,null,w(s.commentIds,a=>(o(),x(t,{commentId:a},null,8,["commentId"]))),256))])}}}),mt={key:0,class:"main"},_t=n("br",null,null,-1),ut=n("br",null,null,-1),dt={key:1},ht=n("h1",null,"loading...",-1),pt=[ht],gt=v({__name:"[id]",setup(s){const i=T();console.log(i.params.id),f(null),f(null);const e=f();return fetch(`https://hacker-news.firebaseio.com/v0/item/${i.params.id}.json?print=pretty`).then(t=>t.json()).then(t=>{e.value=t}).catch(t=>console.log(t)).finally(()=>console.log("finally")),j(()=>{}),(t,a)=>{const m=S,l=O,h=at;return o(),r(g,null,[d(m),c(e)?(o(),r("div",mt,[_t,d(l,{story:c(e)},null,8,["story"]),ut,d(h,{commentIds:c(e).kids},null,8,["commentIds"])])):(o(),r("div",dt,pt))],64)}}});export{gt as default};
