import{t as p,_ as S}from"./timestamp.44e4e51a.js";import{_ as A,o,c as i,a as t,t as m,n as b,v as x,q as y,s as k,u as c,b as u,x as I,w as M,r as v,y as $,F as g,z as w,A as T,B as j}from"./entry.93a56882.js";import{_ as B}from"./nuxt-link.96d0f6ec.js";const L={props:["time"],data(){return{abs_time:null,relative_time:null}},mounted(){const s=/ GMT\+0800 \(China Standard Time\)$/;this.abs_time=p.toDate(this.time).toString().replace(s,"")},computed:{relative_time(){var s={hour:Math.round((parseInt(p.now())-parseInt(this.time))/3600),min:(parseInt(p.now())-parseInt(this.time))%60};return`${s.hour} hours ago`}}};function N(s,a,n,e,l,d){return o(),i("div",null,[t("span",null,m(l.abs_time),1),b(t("span",null,"          "+m(d.relative_time),513),[[x,!0]])])}const E=A(L,[["render",N]]),D={style:{position:"relative"}},F={tabindex:"0",class:"collapse collapse-arrow border border-base-300 bg-base-200",style:{width:"50%",margin:"auto","text-align":"center"}},R={class:"collapse-title text-xl font-medium"},q=["href"],z={class:"collapse-content"},H={id:"time ",class:"container"},G=["href"],J={style:{"text-align":"right",right:"20px"}},O={class:"stats shadow"},U={class:"stat place-items-center"},K=t("div",{class:"stat-title"},"Replies",-1),P={class:"stat-value"},Q=t("div",{class:"stat-desc"},"From January 1st to February 1st",-1),W={class:"stat place-items-center"},X=t("div",{class:"stat-title"},"Vote",-1),Y={class:"stat-value text-secondary"},Z=t("div",{class:"stat-desc text-secondary"},"↗︎ 40 (2%)",-1),tt=y({__name:"ArticleInfoV1",props:{story:{type:Object,required:!0}},setup(s){const a=s;fetch(a.story.url).then(e=>e.text()).then(e=>{const l=document.createElement("div");l.innerHTML=e;const d=l.querySelectorAll("img");let r=null,h=0;if(d.forEach(_=>{const f=_.width*_.height;f>h&&(h=f,r=_.src)}),r){const _=document.getElementById("image-container");_.style.backgroundImage=`url(${a.story.url}${r})`}}).catch(e=>console.error("Error fetching news:",e)),console.log(a.story);const n=k(()=>new URL(a.story.url).hostname);return(e,l)=>{const d=E;return o(),i("div",D,[t("div",F,[t("div",R,[t("a",{class:"title",href:s.story.url},[t("h1",null,m(s.story.title),1)],8,q)]),t("div",z,[t("div",H,[t("a",{href:s.story.url,class:"domain"},"www."+m(c(n)),9,G)]),u(d,{id:"source-time",time:s.story.time},null,8,["time"])])]),t("div",J,[t("div",O,[t("div",U,[K,t("div",P,m(s.story.kids.length),1),Q]),t("div",W,[X,t("div",Y,m(s.story.score),1),Z])])])])}}}),et={class:"comment-author"},st=y({__name:"Author",props:{author:String},setup(s){return(a,n)=>{const e=B;return o(),I(e,{to:`user/${s.author}`},{default:M(()=>[t("div",et,m(s.author),1)]),_:1},8,["to"])}}}),nt=t("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),ot=t("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1),ct=["id"],it=["href"],at={class:"sr-only"},rt={class:"comment-heading"},lt={class:"comment-info"},mt={class:"m-0",style:{}},dt={class:"comment-body"},_t=["innerHTML"],ut={key:0},ht={class:"replies"},pt={key:1},vt=t("span",{class:"loading loading-spinner loading-sm"},null,-1),yt=[vt],C=y({__name:"CommentV1",props:{commentId:Number},setup(s){const a=s,n=v();fetch(`https://hacker-news.firebaseio.com/v0/item/${a.commentId}.json?print=pretty`).then(r=>r.json()).then(r=>{n.value=r,console.log(n.value)}).catch(r=>console.log(r)).finally(()=>console.log("finally"));const e=v(!1);function l(){e.value=!e.value,console.log(e.value)}const d=k(()=>({hour:(parseInt(p.now())-parseInt(n.value?n.value.time:0))/3600,min:(parseInt(p.now())-parseInt(n.value?n.value.time:0))%60}));return(r,h)=>{const _=st,f=C;return o(),i(g,null,[nt,ot,c(n)?(o(),i("div",{key:0,class:"comment",id:s.commentId},[t("a",{href:`#${s.commentId}`,class:"comment-border-link"},[t("span",at,"jump to comment "+m(s.commentId),1)],8,it),t("div",rt,[t("div",lt,[u(_,{author:c(n).by,class:"comment-author"},null,8,["author"]),t("div",mt,m(Math.round(c(d).hour))+" hours "+m(c(d).min.toString().slice(0,2))+" mins ago ",1)])]),t("div",dt,[t("div",{innerHTML:c(n).text},null,8,_t),c(n).kids?(o(),i("div",ut,[c(e)?(o(),i("button",{key:1,onClick:l,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," hide replies ")):(o(),i("button",{key:0,onClick:l,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," show "+m(c(n).kids.length)+" replies ",1))])):$("",!0)]),c(n).kids?(o(!0),i(g,{key:0},w(c(n).kids,V=>b((o(),i("div",ht,[u(f,{commentId:V},null,8,["commentId"])],512)),[[x,c(e)]])),256)):$("",!0)],8,ct)):(o(),i("div",pt,yt))],64)}}});const ft={class:"comment-thread"},gt=y({__name:"CommentsV1",props:{commentIds:Array},setup(s){return(a,n)=>{const e=C;return o(),i("div",ft,[(o(!0),i(g,null,w(s.commentIds,l=>(o(),I(e,{commentId:l},null,8,["commentId"]))),256))])}}}),$t={key:0,class:"main"},bt={key:1},xt=t("h1",null,"loading...",-1),kt=[xt],Vt=y({__name:"[id]",setup(s){const a=T();console.log(a.params.id),v(null),v(null);const n=v();return fetch(`https://hacker-news.firebaseio.com/v0/item/${a.params.id}.json?print=pretty`).then(e=>e.json()).then(e=>{n.value=e}).catch(e=>console.log(e)).finally(()=>console.log("finally")),j(()=>{}),(e,l)=>{const d=S,r=tt,h=gt;return o(),i(g,null,[u(d),c(n)?(o(),i("div",$t,[u(r,{story:c(n)},null,8,["story"]),u(h,{commentIds:c(n).kids},null,8,["commentIds"])])):(o(),i("div",bt,kt))],64)}}});export{Vt as default};
