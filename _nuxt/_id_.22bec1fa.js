import{t as p,_ as S}from"./timestamp.1b7eb6ae.js";import{_ as A,o,c as r,a as s,t as _,n as $,v as k,q as v,s as I,u as c,b as d,x,w as M,r as f,y as b,F as g,z as w,A as T,B as j}from"./entry.8e53d658.js";import{_ as B}from"./nuxt-link.13d48ea8.js";const L={props:["time"],data(){return{abs_time:null,relative_time:null}},mounted(){const n=/ GMT\+0800 \(China Standard Time\)$/;this.abs_time=p.toDate(this.time).toString().replace(n,"")},computed:{relative_time(){var n={hour:Math.round((parseInt(p.now())-parseInt(this.time))/3600),min:(parseInt(p.now())-parseInt(this.time))%60};return`${n.hour} hours ago`}}};function N(n,i,e,t,l,m){return o(),r("div",null,[s("span",null,_(l.abs_time),1),$(s("span",null,"          "+_(m.relative_time),513),[[k,!0]])])}const E=A(L,[["render",N]]),D={style:{position:"relative"}},q={tabindex:"0",class:"collapse collapse-arrow border border-base-300 bg-base-200",style:{width:"50%",margin:"auto","text-align":"center"}},z={class:"collapse-title text-xl font-medium"},H=["href"],R={class:"collapse-content"},F={id:"time ",class:"container"},G=["href"],O=v({__name:"ArticleInfoV1",props:{story:{type:Object,required:!0}},setup(n){const i=n;fetch(i.story.url).then(t=>t.text()).then(t=>{const l=document.createElement("div");l.innerHTML=t;const m=l.querySelectorAll("img");let a=null,h=0;if(m.forEach(u=>{const y=u.width*u.height;y>h&&(h=y,a=u.src)}),a){const u=document.getElementById("image-container");u.style.backgroundImage=`url(${i.story.url}${a})`}}).catch(t=>console.error("Error fetching news:",t)),console.log(i.story);const e=I(()=>new URL(i.story.url).hostname);return(t,l)=>{const m=E;return o(),r("div",D,[s("div",q,[s("div",z,[s("a",{class:"title",href:n.story.url},[s("h1",null,_(n.story.title),1)],8,H)]),s("div",R,[s("div",F,[s("a",{href:n.story.url,class:"domain"},"www."+_(c(e)),9,G)]),d(m,{id:"source-time",time:n.story.time},null,8,["time"])])])])}}}),U={class:"comment-author"},J=v({__name:"Author",props:{author:String},setup(n){return(i,e)=>{const t=B;return o(),x(t,{to:`user/${n.author}`},{default:M(()=>[s("div",U,_(n.author),1)]),_:1},8,["to"])}}}),K=s("link",{rel:"preconnect",href:"https://rsms.me/"},null,-1),P=s("link",{rel:"stylesheet",href:"https://rsms.me/inter/inter.css"},null,-1),Q=["id"],W=["href"],X={class:"sr-only"},Y={class:"comment-heading"},Z={class:"comment-info"},tt={class:"m-0",style:{}},et={class:"comment-body"},nt=["innerHTML"],st={key:0},ot={class:"replies"},ct={key:1},rt=s("span",{class:"loading loading-spinner loading-sm"},null,-1),it=[rt],C=v({__name:"CommentV1",props:{commentId:Number},setup(n){const i=n,e=f();fetch(`https://hacker-news.firebaseio.com/v0/item/${i.commentId}.json?print=pretty`).then(a=>a.json()).then(a=>{e.value=a,console.log(e.value)}).catch(a=>console.log(a)).finally(()=>console.log("finally"));const t=f(!1);function l(){t.value=!t.value,console.log(t.value)}const m=I(()=>({hour:(parseInt(p.now())-parseInt(e.value?e.value.time:0))/3600,min:(parseInt(p.now())-parseInt(e.value?e.value.time:0))%60}));return(a,h)=>{const u=J,y=C;return o(),r(g,null,[K,P,c(e)?(o(),r("div",{key:0,class:"comment",id:n.commentId},[s("a",{href:`#${n.commentId}`,class:"comment-border-link"},[s("span",X,"jump to comment "+_(n.commentId),1)],8,W),s("div",Y,[s("div",Z,[d(u,{author:c(e).by,class:"comment-author"},null,8,["author"]),s("div",tt,_(Math.round(c(m).hour))+" hours "+_(c(m).min.toString().slice(0,2))+" mins ago ",1)])]),s("div",et,[s("div",{innerHTML:c(e).text},null,8,nt),c(e).kids?(o(),r("div",st,[c(t)?(o(),r("button",{key:1,onClick:l,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," hide replies ")):(o(),r("button",{key:0,onClick:l,class:"btn btn-xs sm:btn-sm md:btn-sm lg:btn-sm"}," show "+_(c(e).kids.length)+" replies ",1))])):b("",!0)]),c(e).kids?(o(!0),r(g,{key:0},w(c(e).kids,V=>$((o(),r("div",ot,[d(y,{commentId:V},null,8,["commentId"])],512)),[[k,c(t)]])),256)):b("",!0)],8,Q)):(o(),r("div",ct,it))],64)}}});const at={class:"comment-thread"},lt=v({__name:"CommentsV1",props:{commentIds:Array},setup(n){return(i,e)=>{const t=C;return o(),r("div",at,[(o(!0),r(g,null,w(n.commentIds,l=>(o(),x(t,{commentId:l},null,8,["commentId"]))),256))])}}}),mt={key:0,class:"main"},_t={key:1},ut=s("h1",null,"loading...",-1),dt=[ut],vt=v({__name:"[id]",setup(n){const i=T();console.log(i.params.id),f(null),f(null);const e=f();return fetch(`https://hacker-news.firebaseio.com/v0/item/${i.params.id}.json?print=pretty`).then(t=>t.json()).then(t=>{e.value=t}).catch(t=>console.log(t)).finally(()=>console.log("finally")),j(()=>{}),(t,l)=>{const m=S,a=O,h=lt;return o(),r(g,null,[d(m),c(e)?(o(),r("div",mt,[d(a,{story:c(e)},null,8,["story"]),d(h,{commentIds:c(e).kids},null,8,["commentIds"])])):(o(),r("div",_t,dt))],64)}}});export{vt as default};
